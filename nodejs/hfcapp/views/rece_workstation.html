<!DOCTYPE HTML>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<script type="text/javascript">		
		$(".trapaddr").dblclick(function(){
			var domstr = $(this).data("paramname");
			var rownum = $(this).data("rownum");
			$( "#dialog-form" ).dialog({
        	      autoOpen: false,
        	      height: 240,
        	      width: 300,
        	      modal: true,
        	      buttons: {
        	    	  Ok: function() {	   
        	    		  if(ipvalidate($("#set_value").val())){
        	    			  var node = __globalobj__._realDevice.getFirstChild();
            	    		  var datastring = '{"cmd":"hfcvalueset","target":"setTrapHost","ip":"' + __globalobj__._realDevice.key +'","domstr":"'+ domstr +'","isRow":"true","rowNum":"'+ rownum+'","value":"'+ $("#set_value").val()+'"}';
            	    		  __globalobj__._send(datastring);
            	              $( this ).dialog( "close" );
        	    		  }else{
        	    			  $("#set_value").addClass( "ui-state-error-custom" )
        	    		  }        	    		  
        	            }
        	      },
        	      close: function() {
	        	    	$("#set_value").removeClass("ui-state-error-custom");
	        	  }
    	    });
            $("#set_value").val($(this)[0].textContent);
            updateTips($.i18n.prop('message_devnewtrap'));
            $("#dialog-form").dialog("open");
		});
		
		$(".hfcunit").dblclick(function(){
			var domstr = $(this)[0].id;
			$( "#dialog-form" ).dialog({
        	      autoOpen: false,
        	      height: 240,
        	      width: 300,
        	      modal: true,
        	      buttons: {
        	    	  Ok: function() {
        	    		  if(checkInt($("#set_value").val())){
        	    			  var node = __globalobj__._realDevice.getFirstChild();
            	    		  var datastring = '{"cmd":"hfcvalueset","target":"setVars","ip":"' + __globalobj__._realDevice.key+'","isRow":"false","domstr":"'+ domstr +'","value":"'+ $("#set_value").val()+'"}';
            	    		  __globalobj__._send(datastring);
            	              $( this ).dialog( "close" );
        	    		  }else{
        	    			  $("#set_value").addClass( "ui-state-error-custom" )
        	    		  }
        	    		  
        	            }
        	      },
        	      close: function() {
	        	    	$("#set_value").removeClass("ui-state-error-custom");
	        	  }
    	    });
            $("#set_value").val($(this).val().replace(/[^\d.]/g,''));
            updateTips($.i18n.prop('message_devnewval'));
            $("#dialog-form").dialog("open");
		}); 
		
		$(".tbl_hfcunit").dblclick(function(){
			var domstr = $(this).data("paramname");			
			var rownum = $(this).data("rownum");
			$( "#dialog-form" ).dialog({
        	      autoOpen: false,
        	      height: 240,
        	      width: 300,
        	      modal: true,
        	      buttons: {
        	    	  Ok: function() {
        	    		  if(checkInt($("#set_value").val())){
        	    			  var node = __globalobj__._realDevice.getFirstChild();
            	    		  var datastring = '{"cmd":"hfcvalueset","target":"setVars","ip":"' + __globalobj__._realDevice.key + '","rowNum":"'+ rownum 
            	    			  +'","isRow":"true","domstr":"'+ domstr +'","value":"'+ $("#set_value").val()+'"}';
            	    		  __globalobj__._send(datastring);
            	              $( this ).dialog( "close" );
        	    		  }else{
        	    			  $("#set_value").addClass( "ui-state-error-custom" )
        	    		  }
        	    		  
        	            }
        	      },
        	      close: function() {
	        	    	$("#set_value").removeClass("ui-state-error-custom");
	        	  }
    	    });
            $("#set_value").val($(this)[0].textContent.replace(/[^\d.]/g,''));
            updateTips($.i18n.prop('message_devnewval'));
            $("#dialog-form").dialog("open");
		}); 
		
		$(".isalarmThreshold").dblclick(function(){
			var node = __globalobj__._realDevice.getFirstChild();
			var domstr = $(this)[0].id;
			var datastring = '{"cmd":"hfcvalueset","target":"getalarmThreshold","ip":"' + __globalobj__._realDevice.key +'","domstr":"'+ domstr 
			+'","isRow":"false","rcommunity":"'+ __globalobj__._realDevice.data.rcommunity + '","devtype":"'+ __globalobj__._realDevice.getLastChild().key + '"}';
  		  	__globalobj__._send(datastring);			
		}); 
		
		$(".tbl_isalarmThreshold").dblclick(function(){
			var node = __globalobj__._realDevice.getFirstChild();
			var domstr = $(this).data("paramname");			
			var rownum = $(this).data("rownum");
			var datastring = '{"cmd":"hfcvalueset","target":"getalarmThreshold","ip":"' + __globalobj__._realDevice.key +'","domstr":"'+ domstr +'","rowNum":"'+ rownum 
				+'","isRow":"true","rcommunity":"'+ __globalobj__._realDevice.data.rcommunity + '","devtype":"'+ __globalobj__._realDevice.getLastChild().key + '"}';
  		  	__globalobj__._send(datastring);			
		}); 
		
		$('.device-close').click(function(){
			var node = __globalobj__._realDevice.getFirstChild();
			var datastring = '{"cmd":"deviceclose","ip":"' + __globalobj__._realDevice.key + '"}';
  		  	__globalobj__._send(datastring);
  		  	$('.candile').empty();
		});
		
		
		$('#dev-status-text')[0].textContent = $.i18n.prop('message_devconnected');
		$('#i18n-devip')[0].textContent = $.i18n.prop('message_devip');
		$('#i18n-sysdesc')[0].textContent = $.i18n.prop('message_devsysdesc');
		$('#i18n-contact')[0].textContent = $.i18n.prop('message_devcontact');
		$('#i18n-uptime')[0].textContent = $.i18n.prop('message_devuptime');
		$('#i18n-devoptrvparam')[0].textContent = $.i18n.prop('message_devoptrvparam');
		$('#i18n-publicparam')[0].textContent = $.i18n.prop('message_devpublicparam');
		$('#i18n-inputpower')[0].textContent = $.i18n.prop('message_devinpower');
		$('#i18n-publictype')[0].textContent = $.i18n.prop('message_devtype');		
		$('#i18n-rtnoputpower')[0].textContent = $.i18n.prop('message_devrtnouputpower');
		$('#i18n-channelnumber')[0].textContent = $.i18n.prop('message_devchannelnumber');
		$('#i18n-rtnbiascurrent')[0].textContent = $.i18n.prop('message_devrtnbiascurrent');
		$('#i18n-powername')[0].textContent = $.i18n.prop('message_devpowername');
		$('#i18n-powerval')[0].textContent = $.i18n.prop('message_devpowerval');
		$('#i18n-outputtbl')[0].textContent = $.i18n.prop('message_devoutputtbl');
		$('#i18n-outputlevel')[0].textContent = $.i18n.prop('message_devoutputlevel');
		
		$('#i18n-traptbl')[0].textContent = $.i18n.prop('message_devtraptbl');		
		$('#i18n-trapindex')[0].textContent = $.i18n.prop('message_devtrapindex');
		$('#i18n-trapip')[0].textContent = $.i18n.prop('message_devtrapip');		
		$('#i18n-publictemper')[0].textContent = $.i18n.prop('message_devtemper');
		$('#i18n-publicID')[0].textContent = $.i18n.prop('message_devlogicid');		
		$('#i18n-publictype')[0].textContent = $.i18n.prop('message_devtype');		
		$('#i18n-publicsn')[0].textContent = $.i18n.prop('message_devsn');
	</script>
</head>
<body>
	<div class="devdetail">
		<button type="button" class="close device-close" aria-hidden="true">&times;</button>
		<ul class = "devdetail-header">
			<li class="dev-img"><img src = "../images/oprv8604jl.png" /></li>
			<li class="dev-status"><span id="dev-status-text"></span></li>
			<li>
				<table class="table tbl_noborder tbl_devtips">
	        		<tr>
	        			<td id="i18n-devip"></td>
	        			<td id="panel-devip"></td>
	        			<td id="i18n-sysdesc"></td>
	        			<td id="panel-devinfo"></td>	        			
	        		</tr>
	        		<tr>
	        			<td id="i18n-contact"></td>
	        			<td id="panel-devcontact"></td>
	        			<td id="i18n-uptime"></td>
	        			<td id="panel-onlinetimeticks"></td>
	        		</tr>
	        	</table>
			</li>
		</ul>	
		<div class = "devdetail-content">
			<div class="tabbable">
				<ul class="nav nav-tabs" role="tablist">
				    <li class="active"><a href="#tab-dev1" data-toggle="tab" id="i18n-devoptrvparam"></a></li>
				    <li><a href="#tab-dev2" data-toggle="tab" id="i18n-publicparam"></a></li>				    
				</ul>
				<div class="tab-content">
				    <div class="tab-pane tab-devpane active" id="tab-dev1">
					    <div class="devdetail-content">			
					    	<table class="tbl_devdetail-content">
					    		<tr>
					    			<td>
					    				<table class="table tbl_detail">
										  <tbody>
											    <tr>
											      <td id="i18n-inputpower">输入光功率:</td>
											      <td><input type="text" class="form-control isalarmThreshold" id="fnOpticalReceiverPower" readonly></td>
											      <td id="i18n-rtnoputpower">反向发射光功率:</td>
											      <td><input type="text" class="form-control" id="detail_mineroptical" readonly></td>
											    </tr>
											    <tr>
											      <td id="i18n-rtnbiascurrent">反向偏置电流:</td>
											      <td><input type="text" class="form-control" id="detail_minerelectric" readonly></td>
											      <td>反向衰减值:</td>
											      <td><input type="text" class="form-control" id="detail_minieratt" readonly></td>
											    </tr>
											    <tr>
											      <td id="i18n-channelnumber">频道数:</td>
											      <td><input type="text" class="form-control hfcunit" id="fnRFChannelNum" readonly></td>
											    </tr>
										  </tbody>
										</table>
					    			</td>
					    		</tr>
					    		<tr>
					    			<td>
					    				<table class="table tbl_power" style="width:30%">
										   <thead>
											    <tr>
											      <th id="i18n-powername">电源输出表</th>
											      <th id="i18n-powerval">输出电压</th>
											    </tr>
										  </thead>
										  <tbody>
												<tr>
													<td class="fnDCPowerName_row0"></td>
													<td class="fnDCPowerVoltage_row0 tbl_isalarmThreshold" data-rownum="0" data-paramname="fnDCPowerVoltage" id="fnDCPowerVoltage_row0"></td>
												</tr>
												<tr>
													<td class="fnDCPowerName_row1"></td>
													<td class="fnDCPowerVoltage_row1 tbl_isalarmThreshold" data-rownum="1" data-paramname="fnDCPowerVoltage" id="fnDCPowerVoltage_row1"></td>
												</tr>
										  </tbody>
										</table>
					    			</td>
					    		</tr>
					    		<tr>
					    			<td>
					    				<table class="table tbl_devmiddle tbl_devcontent" style="width:30%">
										   <thead>
											    <tr>
											      <th id="i18n-outputtbl">输出端口</th>
											      <th>ATT</th>
											      <th>EQ</th>
											      <th id="i18n-outputlevel">输出电平</th>
											    </tr>
										  </thead>
										  <tbody>
												<tr>
													<td class="fnRFPortName_row0"></td>
													<td class="fnOutputRFlevelatt_row0 tbl_hfcunit" data-rownum="0" data-paramname="fnOutputRFlevelatt" id="fnOutputRFlevelatt_row0"></td>
													<td class="fnOutputRFleveleq_row0 tbl_hfcunit" data-rownum="0" data-paramname="fnOutputRFleveleq" id="fnOutputRFleveleq_row0"></td>
													<td class="fnRFPortOutputRFLevel_row0 tbl_isalarmThreshold" data-rownum="0" data-paramname="fnRFPortOutputRFLevel" id="fnRFPortOutputRFLevel_row0"></td>
												</tr>
												<tr>
													<td class="fnRFPortName_row1"></td>
													<td class="fnOutputRFlevelatt_row1 tbl_hfcunit" data-rownum="1" data-paramname="fnOutputRFlevelatt" id="fnOutputRFlevelatt_row1"></td>
													<td class="fnOutputRFleveleq_row1 tbl_hfcunit" data-rownum="1" data-paramname="fnOutputRFleveleq" id="fnOutputRFleveleq_row1"></td>
													<td class="fnRFPortOutputRFLevel_row1 tbl_isalarmThreshold" data-rownum="1" data-paramname="fnRFPortOutputRFLevel" id="fnRFPortOutputRFLevel_row1"></td>
												</tr>
										  </tbody>
										</table>
					    			</td>
					    		</tr>
					    	</table>						
					    </div>				    	
				    </div>
				    <div class="tab-pane tab-devpane" id="tab-dev2">
				    	<div class="devdetail-public">
				    		<div>
				    			<table class="table table-bordered">
								   <caption id="i18n-traptbl">Trap目标主机表</caption>
								   <thead>
									    <tr>
									      <th id="i18n-trapindex">序号.</th>
									      <th id="i18n-trapip">目标IP地址</th>
									    </tr>
								  </thead>
								  <tbody>
									    <tr>
									      <td>1.</td>
									      <td class="trapaddr" data-rownum="0" data-paramname="commonAgentTrapIP" id="commonAgentTrapIP_row0">0.0.0.0</td>
									    </tr>
									    <tr>
									      <td>2.</td>
									      <td class="trapaddr" data-rownum="1" data-paramname="commonAgentTrapIP" id="commonAgentTrapIP_row1">0.0.0.0</td>
									    </tr>
									    <tr>
									      <td>3.</td>
									      <td class="trapaddr" data-rownum="2" data-paramname="commonAgentTrapIP" id="commonAgentTrapIP_row2">0.0.0.0</td>
									    </tr>
									    <tr>
									      <td>4.</td>
									      <td class="trapaddr" data-rownum="3" data-paramname="commonAgentTrapIP" id="commonAgentTrapIP_row3">0.0.0.0</td>
									    </tr>
									    <tr>
									      <td>5.</td>
									      <td class="trapaddr" data-rownum="4" data-paramname="commonAgentTrapIP" id="commonAgentTrapIP_row4">0.0.0.0</td>
									    </tr>
									    <tr>
									      <td>6.</td>
									      <td class="trapaddr" data-rownum="5" data-paramname="commonAgentTrapIP" id="commonAgentTrapIP_row5">0.0.0.0</td>
									    </tr>
									    <tr>
									      <td>7.</td>
									      <td class="trapaddr" data-rownum="6" data-paramname="commonAgentTrapIP" id="commonAgentTrapIP_row6">0.0.0.0</td>
									    </tr>
									    <tr>
									      <td>8.</td>
									      <td class="trapaddr" data-rownum="7" data-paramname="commonAgentTrapIP" id="commonAgentTrapIP_row7">0.0.0.0</td>
									    </tr>
								  </tbody>
								</table>
				    		</div>
					    	<div>
					    		<table class="table tbl_hfcpublic">
								  <tbody>
									    <tr>
									      <td id="i18n-publictemper">温度:</td>
									      <td><input type="text" class="form-control" id="commonInternalTemperature" readonly></td>									      
									    </tr>
									    <tr>
									      <td id="i18n-publicID">逻辑ID:</td>
									      <td><input type="text" class="form-control" id="commonNELogicalID" readonly></td>
									    </tr>
									    <tr>
									      <td id="i18n-publictype">型号:</td>
									      <td><input type="text" class="form-control" id="commonNEModelNumber" readonly></td>
									    </tr>
									    <tr>
									      <td id="i18n-publicsn">序列号:</td>
									      <td><input type="text" class="form-control" id="commonNESerialNumber" readonly></td>
									    </tr>
									    <tr>
									      <td>MAC:</td>
									      <td><input type="text" class="form-control" id="commonDeviceMACAddress" readonly></td>
									    </tr>
								  </tbody>
								</table>
					    	</div>							
					    </div>				    	
				    </div>
				</div>
			</div>
		</div>
	</div>	
</body>
